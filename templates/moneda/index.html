{% extends 'base/base.html' %}
{% load staticfiles %}
{% block content %}
<script>

    $(document).ready(
            function() {
                setInterval(function() {
                    $('#prueba1').load('tabmonedas');
                   
                }, 30000);
            });
    </script>


<script>
    $(document).ready(function() {
        
       var lista=[];
       var lista2=[];
       $(".name").each(function(){
            var monto = String($(this).text());
            lista.push(monto);                      
                                
        });

        $(".monto").each(function(){
            var cantidad = Number($(this).text());
            lista2.push(cantidad);
        }); 
                            
        var datos={
            type:"bar",
            data:{
                datasets:[{
                    label:'Prueba',
                    data:lista2,
                    backgroundColor:[
                        "#F7464A",
                        "#46BFBD",
                        "#FDB45C",
                        "#949FB1",
                        "#4D5360",

                    ],
                }],
                labels:lista,
            },
            optiops:{
                reponsive: true,
            }
        };
        var canvas= document.getElementById('chart').getContext('2d');
        window.bar= new Chart(canvas, datos);

                
    });

</script>
    <!-- monto total saldo -->
    <script>

    $(document).ready(
            function() {
                var jq=$(document),
                txtdolares=jq.find('.monto');   

                setInterval(function() {
                     var total=0;
                     var final=0;
                     var lista=[];
                     var lista2=[];
                             $(".monto").each(function(){
                                var monto = Number($(this).text());
                                lista.push(monto);                      
                                
                             });

                             $(".cantidad").each(function(){
                                var cantidad = Number($(this).text());
                                lista2.push(cantidad);                          
                                
                             });
                             for(i=0;i<lista.length;i++){
                                for(j=0;j<lista2.length;j++){
                                    var total=lista[i]*lista2[j];
                                    
                                    var final=total+final;
                                    i=i+1;
                                    
                                    

                                }
                                
                            }

                             total=total.toFixed(2);
                             final=final.toFixed(2);
                             $('#total').text(final);       
                    
                }, 10000);
            });
    </script>


    
<!-- nombre y monto mayor -->

    <script>

    $(document).ready(
            function() {
                var jq=$(document),
                txtdolares=jq.find('.monto');   

                setInterval(function() {
                     var total=0;
                     var final=1;
                     var lista=[];
                     var lista2=[];
                     var lista3=[];
                
                     var acumulador=0;
                     var acumulador1=0;
                             $(".monto").each(function(){
                                var monto = Number($(this).text());
                                lista.push(monto);                      
                                
                             });

                             $(".cantidad").each(function(){
                                var cantidad = Number($(this).text());
                                lista2.push(cantidad);                          
                                
                             });
                             //busca la lista de los nombres d elas monedas
                             $("tbody tr").each(function(){
                                var lista4={};
                                var tds=$(this).find("td");
                                lista4.Name=tds.filter(":eq(0)").text();
                                lista3.push(lista4);
                                
                            });

                             for(i=0;i<lista.length;i++){
                                for(j=0;j<lista2.length;j++){
                                    var total=lista[i]*lista2[j];
                                    
                                    if (total > final){
                                        var final =total;
                                        var acumulador=i+1;

                                    }else{
                                        var final=final;
                                        var acumulador=acumulador;
                                    }


                                    
                                    i=i+1;
                                    
                                    

                                }
                                
                                
                            }
                             var acumulador1=lista3[acumulador-1];
                             total=total.toFixed(2);
                             
                             $('#mayor').text(final);  
                             $('#mayor1').text(acumulador1.Name);   
                    
                }, 10000);
            });
    </script>


<div class="container-fluid">
      <!-- Breadcrumbs-->
      <ol class="breadcrumb">
        <li class="breadcrumb-item">
          <a href="#">Dashboard</a>
        </li>
        <li class="breadcrumb-item active">My Dashboard</li>
      </ol>
      <!-- Icon Cards-->
      <div class="row">
        <div class="col-xl-3 col-sm-6 mb-3">
          <div class="card text-white bg-primary o-hidden h-100">
            <div class="card-body">
              <div class="card-body-icon">
                <i class="fa fa-fw fa-dollar"></i> <!-- aqui -->
              </div>
              <div class="mr-5"><p>Monto en $</p></div>
            </div>
            <a class="card-footer text-white clearfix small z-1" href="#">
              <span class="float-left"><p id="total"></p></span>
              <span class="float-right">
                <i class="fa fa-angle-right"></i>
              </span>
            </a>
          </div>
        </div>
        <div class="col-xl-3 col-sm-6 mb-3">
          <div class="card text-white bg-warning o-hidden h-100">
            <div class="card-body">
              <div class="card-body-icon">
                <i class="fa fa-fw fa-list"></i>
              </div>
              <div class="mr-5"><p id="mayor1"></p></div>
            </div>
            <a class="card-footer text-white clearfix small z-1" href="#">
              <span class="float-left"><p id="mayor"></p></span>
              <span class="float-right">
                <i class="fa fa-angle-right"></i>
              </span>
            </a>
          </div>
        </div>
        <div class="col-xl-3 col-sm-6 mb-3">
          <div class="card text-white bg-success o-hidden h-100">
            <div class="card-body">
              <div class="card-body-icon">
                <i class="fa fa-fw fa-shopping-cart"></i>
              </div>
              <div class="mr-5">Building</div>
            </div>
            <a class="card-footer text-white clearfix small z-1" href="#">
              <span class="float-left">View Details</span>
              <span class="float-right">
                <i class="fa fa-angle-right"></i>
              </span>
            </a>
          </div>
        </div>
        <div class="col-xl-3 col-sm-6 mb-3">
          <div class="card text-white bg-danger o-hidden h-100">
            <div class="card-body">
              <div class="card-body-icon">
                <i class="fa fa-fw fa-support"></i>
              </div>
              <div class="mr-5">Building</div>
            </div>
            <a class="card-footer text-white clearfix small z-1" href="#">
              <span class="float-left"></span>
              
            </a>
          </div>
        </div>
      </div>
     <!-- lo que falta va aqui -->
    



    <div class="canvas-container" style="width: 50%;">
        
        <canvas     id="chart" width="100%" height="100"></canvas>
    </div> 
      <!-- Example DataTables Card-->
      <div class="card mb-3">
        <div class="card-header">
          <i class="fa fa-table"></i> Cryptocurrency</div>
        <div class="card-body" id="card">
          <div class="table-responsive" id="prueba1">
             {% include 'moneda/tabmonedas.html'%}
          </div>
        </div>
        <div class="card-footer small text-muted">Updated yesterday at 11:59 PM</div>
      </div>
    </div>


{% endblock %}